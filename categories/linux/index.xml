<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux - 分类 - LEON BLOG</title><link>https://blog.liangml.dpdns.org/categories/linux/</link><description>运维小站，分享些技术经验。</description><generator>Hugo 0.157.0 &amp; FixIt v0.4.2</generator><language>zh-CN</language><lastBuildDate>Thu, 17 Oct 2024 18:13:34 +0800</lastBuildDate><atom:link href="https://blog.liangml.dpdns.org/categories/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Linux</title><link>https://blog.liangml.dpdns.org/posts/linux/</link><pubDate>Thu, 17 Oct 2024 18:13:34 +0800</pubDate><guid>https://blog.liangml.dpdns.org/posts/linux/</guid><category domain="https://blog.liangml.dpdns.org/categories/linux/">Linux</category><description>&lt;h2 class="heading-element" id="mem-centos65"&gt;&lt;span&gt;mem centos6.5&lt;/span&gt;
 &lt;a href="#mem-centos65" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;-/&amp;#43; buffers/cache：
-buffers/cache 的内存数：95 (等于第1行的 used - buffers - cached)
&amp;#43;buffers/cache 的内存数: 32 (等于第1行的 free &amp;#43; buffers &amp;#43; cached)
1. -buffers/cache 反映的是被程序实实在在吃掉的内存，
2. &amp;#43;buffers/cache 反映的是可以挪用的内存总数。&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="linux-ctrl-c无效"&gt;&lt;span&gt;Linux Ctrl C无效&lt;/span&gt;
 &lt;a href="#linux-ctrl-c%e6%97%a0%e6%95%88" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;原因：rvm 版本bug
解决方法：
命令查看：
 正常：
 [root@server002 ~]# trap
 trap -- &amp;#39;&amp;#39; SIGTSTP
 trap -- &amp;#39;&amp;#39; SIGTTIN
 trap -- &amp;#39;&amp;#39; SIGTTOU
 异常：
 [root@server002 ~]# trap
 trap -- &amp;#39;&amp;#39; SIGTSTP
 trap -- &amp;#39;&amp;#39; SIGTTIN
 trap -- &amp;#39;&amp;#39; SIGTTOU
 trap -- &amp;#39;&amp;#39; SIGINT
 trap -- &amp;#39;&amp;#39; SIGQUIT
 现象：终端Ctrl &amp;#43; C完全失效，当执行trap 信号命令时多处两个SIGINT和SIGQUIT两项
升级rvm 版本：rvm get stable（
1.29.4
版本以上都可以解决）
卸载rvm工具：gem uninstall rvm&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="pip"&gt;&lt;span&gt;pip&lt;/span&gt;
 &lt;a href="#pip" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;国内源临时加速&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;pip install markdown -i &amp;lt;https://pypi.tuna.tsinghua.edu.cn/simple&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;永久配置&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 清华源
pip config set global.index-url &amp;lt;https://pypi.tuna.tsinghua.edu.cn/simple&amp;gt;
# 或：
# 阿里源
pip config set global.index-url &amp;lt;https://mirrors.aliyun.com/pypi/simple/&amp;gt;
# 腾讯源
pip config set global.index-url &amp;lt;http://mirrors.cloud.tencent.com/pypi/simple&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="goaccess"&gt;&lt;span&gt;goaccess&lt;/span&gt;
 &lt;a href="#goaccess" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;h2 class="heading-element" id="conda"&gt;&lt;span&gt;conda&lt;/span&gt;
 &lt;a href="#conda" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;• 安装uwsgi：
conda install -c conda-forge uwsgi
# 取消自动进入base环境
conda config --set auto_activate_base false&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="lvm"&gt;&lt;span&gt;lvm&lt;/span&gt;
 &lt;a href="#lvm" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;lvm
pvcreate /dev/vdc
vgextend VolGroup /dev/vdc
lvextend -l &amp;#43;100%FREE /dev/mapper/VolGroup-LogVol00
resize2fs /dev/mapper/VolGroup-LogVol00&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="根据日期排序删除"&gt;&lt;span&gt;根据日期排序删除&lt;/span&gt;
 &lt;a href="#%e6%a0%b9%e6%8d%ae%e6%97%a5%e6%9c%9f%e6%8e%92%e5%ba%8f%e5%88%a0%e9%99%a4" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;ls -ltd FilePath | awk &amp;#39;{if(NR&amp;gt;10){print $0}}&amp;#39; | xargs rm -rf;&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="磁盘在线扩容"&gt;&lt;span&gt;磁盘在线扩容&lt;/span&gt;
 &lt;a href="#%e7%a3%81%e7%9b%98%e5%9c%a8%e7%ba%bf%e6%89%a9%e5%ae%b9" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;安装工具包：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;yum -y install cloud-utils-growpart&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;给指定分区扩容：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;growpart /dev/vda 1&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;扩容支文件系统（如果无法resize，确保分区已扩容的情况下重启服务器离线扩容）：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;resize2fs /dev/vda1&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="timewait查看"&gt;&lt;span&gt;timewait查看&lt;/span&gt;
 &lt;a href="#timewait%e6%9f%a5%e7%9c%8b" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;netstat -an | awk &amp;#39;{print $6}&amp;#39; | sort | uniq -c | sort -nr&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="路由新增删除"&gt;&lt;span&gt;路由新增删除&lt;/span&gt;
 &lt;a href="#%e8%b7%af%e7%94%b1%e6%96%b0%e5%a2%9e%e5%88%a0%e9%99%a4" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;route add -net 106.15.100.0/24 gw 183.57.42.65
route del -net 106.15.100.0/24 gw 183.57.42.65&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="maildrop删除"&gt;&lt;span&gt;maildrop删除&lt;/span&gt;
 &lt;a href="#maildrop%e5%88%a0%e9%99%a4" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;rsync --delete -rlptD /tmp/empty/ /var/spool/postfix/maildrop/&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="ssh-config"&gt;&lt;span&gt;ssh config&lt;/span&gt;
 &lt;a href="#ssh-config" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;ServerAliveInterval 60
ServerAliveCountMax 30
HostkeyAlgorithms &amp;#43;ssh-rsa
PubkeyAcceptedAlgorithms &amp;#43;ssh-rsa
UserKnownHostsFile=/dev/null
StrictHostKeyChecking no
UserKnownHostsFile=/dev/null&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;Host *
 ServerAliveInterval 60
 ServerAliveCountMax 30
 HostkeyAlgorithms &amp;#43;ssh-rsa
 PubkeyAcceptedAlgorithms &amp;#43;ssh-rsa
 StrictHostKeyChecking no&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;Host IPADDRESS
 HostName IPADDRESS
 User root
 IdentityFile ~/.ssh/id_rsa&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="crontab-使用vim编辑"&gt;&lt;span&gt;crontab 使用vim编辑&lt;/span&gt;
 &lt;a href="#crontab-%e4%bd%bf%e7%94%a8vim%e7%bc%96%e8%be%91" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt; 1.对于一些系统，crontab的默认编译器使用起来不是很方便，想换成熟悉的vim，按下面操作即可：编辑.profile文件，增加EDITOR=vim;export EDITOR即可；
 2.在命令行直接输入EDITOR=vim;export EDITOR&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="ossutil"&gt;&lt;span&gt;ossutil&lt;/span&gt;
 &lt;a href="#ossutil" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;/opt/ossutil64 cp xxx.sql.gz oss://BUCKET/dir/ -u -c CONFIGFILE&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="多线程压缩-pigz"&gt;&lt;span&gt;多线程压缩 pigz&lt;/span&gt;
 &lt;a href="#%e5%a4%9a%e7%ba%bf%e7%a8%8b%e5%8e%8b%e7%bc%a9-pigz" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;# 压缩文件
pigz -k filename # -k 保留原文件
pigz -l filename.gz # -l 查看文件压缩内容
# 压缩目录
tar --use-compress-program=&amp;#34;pigz -k&amp;#34; -cvf dir1.tar.gz dir1
# 解压文件
pigz -k -d filename.gz
# 解压目录
tar --use-compress-program=&amp;#34;pigz -k &amp;#34; -xvf dir1.tar.gz&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="requirements-依赖生成"&gt;&lt;span&gt;requirements 依赖生成:&lt;/span&gt;
 &lt;a href="#requirements-%e4%be%9d%e8%b5%96%e7%94%9f%e6%88%90" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;pipreqs --encoding utf8 --force&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="openssl"&gt;&lt;span&gt;openssl&lt;/span&gt;
 &lt;a href="#openssl" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;证书测试&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;openssl s_client -connect domainName:443&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="强密码生成"&gt;&lt;span&gt;强密码生成&lt;/span&gt;
 &lt;a href="#%e5%bc%ba%e5%af%86%e7%a0%81%e7%94%9f%e6%88%90" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;openssl rand -base64 15&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;系统使用规范(自有服务统一授权为普通用户权限)
&lt;ul&gt;
&lt;li&gt;统一数据目录：/data&lt;/li&gt;
&lt;li&gt;统一日志目录：/var/log&lt;/li&gt;
&lt;li&gt;应用统一管理工具：supervisor&lt;/li&gt;
&lt;li&gt;三方应用目录：/opt&lt;/li&gt;
&lt;li&gt;示例服务标记：&lt;em&gt;应用目录：application 应用备份：appbak 公共脚本：scripts&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>linux_analysis_tools</title><link>https://blog.liangml.dpdns.org/posts/linux_analysis_tools/</link><pubDate>Tue, 15 Oct 2024 19:22:30 +0800</pubDate><guid>https://blog.liangml.dpdns.org/posts/linux_analysis_tools/</guid><category domain="https://blog.liangml.dpdns.org/categories/linux/">Linux</category><description>&lt;h2 class="heading-element" id="性能观察工具"&gt;&lt;span&gt;性能观察工具：&lt;/span&gt;
 &lt;a href="#%e6%80%a7%e8%83%bd%e8%a7%82%e5%af%9f%e5%b7%a5%e5%85%b7" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;&lt;img loading="lazy" src='https://blog.liangml.dpdns.org/images/linux_tools.png' alt="/images/linux_tools.png"&gt;&lt;/p&gt;</description></item><item><title>Alibabalinux</title><link>https://blog.liangml.dpdns.org/posts/alibabalinux/</link><pubDate>Tue, 15 Oct 2024 19:19:45 +0800</pubDate><guid>https://blog.liangml.dpdns.org/posts/alibabalinux/</guid><category domain="https://blog.liangml.dpdns.org/categories/linux/">Linux</category><description>&lt;ul&gt;
&lt;li&gt;系统版本：Alibaba Cloud Linux 3.2104 LTS 64位&lt;/li&gt;
&lt;li&gt;默认镜像操作&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# 关闭默认启动服务
systemctl disable nfs-server
systemctl disable rpc-statd
systemctl disable systemd-resolved
systemctl disable rpcbind
systemctl disable nfsdcld

systemctl stop nfs-server
systemctl stop rpc-statd
systemctl stop rpcbind
systemctl stop systemd-resolved
systemctl stop nfsdcld

# 安装软件
dnf install supervisor
dnf install nscd

# 新增普通用户
useradd xxx&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;清除dns缓存&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;service nscd restart
# 或者使用以下命令清楚
service nscd restart&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;crontab&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;59 23 * * * /usr/sbin/logrotate /etc/logrotate.conf&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;logrostate&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;daily #指定转储周期为每天
weekly #指定转储周期为每周；
monthly #指定转储周期为每月；
rotate count #指定日志文件删除之前转储的次数，0指没有备份，5指保留5个备份；
compress #通过gzip压缩转储以后的日志；
nocompress #不需要压缩时，用这个参数；
delaycompress #延迟压缩，和compress一起使用时，转储的日志文件到下一次转储时才压缩；
nodelaycompress #覆盖delaycompress选项，转储同时压缩；
copytruncate #用于还在打开中的日志文件，把当前日志备份并截断；
nocopytruncate #备份日志文件但是不截断；
create mode owner group #转储文件，使用指定的文件模式创建新的日志文件；
nocreate #不建立新的日志文件；
errors address #专储时的错误信息发送到指定的Email地址；
ifempty #即使是空文件也转储，这个是logrotate的缺省选项；
notifempty #如果是空文件的话，不转储；
mail address #把转储的日志文件发送到指定的E-mail地；
nomail #转储时不发送日志文件；
olddir directory #转储后的日志文件放入指定的目录，必须和当前日志文件在同一个文件系统；
noolddir #转储后的日志文件和当前日志文件放在同一个目录下；
prerotate/endscript #在转储以前需要执行的命令可以放入这个对，这两个关键字必须单独成行；
postrotate/endscript #在转储以后需要执行的命令可以放入这个对，这两个关键字必须单独成行；
tabootext [&amp;#43;] list #让logrotate不转储指定扩展名的文件，缺省的扩展名是：.rpm-orig, .rpmsave,v,和~ ；
size size #当日志文件到达指定的大小时才转储，Size可以指定bytes(缺省)以及KB(sizek)或者MB(sizem)；
postrotate #日志轮换过后指定指定的脚本，endscript参数表示结束脚本；
sharedscripts #共享脚本,下面的postrotate中的脚本只执行一次即可；&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;# 手动执行：/usr/sbin/logrotate -f /etc/logrotate.conf
# nginx
/var/log/nginx/*.log {
 daily
 dateext
 missingok
 rotate 52
 compress
 delaycompress
 notifempty
 create 640 nginx zabbix
 sharedscripts
 postrotate
 /usr/sbin/nginx -s reload
 endscript
}
# 示例：待验证
/var/log/nginx/*log {
 daily
 rotate 10
 missingok
 notifempty
 compress
 sharedscripts
 su root
 postrotate
 /bin/kill -USR1 $(cat /var/run/nginx.pid 2&amp;gt;/dev/null) 2&amp;gt;/dev/null || :
 endscript
}
# httpd
/var/log/httpd/*log {
 missingok
 notifempty
 sharedscripts
 delaycompress
 postrotate
 /sbin/service httpd reload &amp;gt; /dev/null 2&amp;gt;/dev/null || true
 endscript
}&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;sshd_config配置&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# alibaba linux default configure
UseDNS no
AddressFamily inet
SyslogFacility AUTHPRIV
PermitRootLogin yes
PasswordAuthentication yes&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;https://help.aliyun.com/zh/ecs/how-to-enable-the-kdump-service-for-linux-instances?spm=a2c4g.750001.0.i42&lt;/code&gt;&lt;/pre&gt;</description></item></channel></rss>