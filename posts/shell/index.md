# Shell


## shell 判断

```plain
-eq # 等于
-ne # 不等于
-gt # 大于
-lt # 小于
-ge # 大于等于
-le # 小于等于
```

## IP地址判断

```plain
((2(5[0-5]|[0-4]\\\\d))|[0-1]?\\\\d{1,2})(\\\\.((2(5[0-5]|[0-4]\\\\d))|[0-1]?\\\\d{1,2})){3}
```

## 字符串运算

| 运算符	 | 说明	                          | 举例                      |
|:-----|:-----------------------------|:------------------------|
| =	   | 检测两个字符串是否相等，相等返回 true。	      | [ \$a = \$b ] 返回 false。 |
| !=	  | 检测两个字符串是否不相等，不相等返回 true。	    | [ \$a != \$b ] 返回 true。 |
| -z	  | 检测字符串长度是否为0，为0返回 true。	      | [ -z \$a ] 返回 false。    |
| -n	  | 检测字符串长度是否不为 0，不为 0 返回 true。	 | [ -n &#34;\$a&#34; ] 返回 true。   |
| $	   | 检测字符串是否不为空，不为空返回 true。	      | [ \$a ] 返回 true。        |

## 文件测试运算符

| 操作符	     | 说明	                                       | 举例                     |
|:---------|:------------------------------------------|:-----------------------|
| -b file	 | 检测文件是否是块设备文件，如果是，则返回 true。	               | [ -b $file ] 返回 false。 |
| -c file	 | 检测文件是否是字符设备文件，如果是，则返回 true。	              | [ -c $file ] 返回 false。 |
| -d file	 | 检测文件是否是目录，如果是，则返回 true。	                  | [ -d $file ] 返回 false。 |
| -f file	 | 检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。	 | [ -f $file ] 返回 true。  |
| -g file	 | 检测文件是否设置了 SGID 位，如果是，则返回 true。	           | [ -g $file ] 返回 false。 |
| -k file	 | 检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。	   | [ -k $file ] 返回 false。 |
| -p file	 | 检测文件是否是有名管道，如果是，则返回 true。	                | [ -p $file ] 返回 false。 |
| -u file	 | 检测文件是否设置了 SUID 位，如果是，则返回 true。	           | [ -u $file ] 返回 false。 |
| -r file	 | 检测文件是否可读，如果是，则返回 true。	                   | [ -r $file ] 返回 true。  |
| -w file	 | 检测文件是否可写，如果是，则返回 true。	                   | [ -w $file ] 返回 true。  |
| -x file	 | 检测文件是否可执行，如果是，则返回 true。	                  | [ -x $file ] 返回 true。  |
| -s file	 | 检测文件是否为空（文件大小是否大于0），不为空返回 true。	          | [ -s $file ] 返回 true。  |
| -e file	 | 检测文件（包括目录）是否存在，如果是，则返回 true。	             | [ -e $file ] 返回 true。  |

其他检查符：  
-S: 判断某文件是否 socket。  
-L: 检测文件是否存在并且是一个符号链接。

## 逻辑运算

| 运算符	  | 说明	     | 举例                                         |
|:------|:--------|:-------------------------------------------|
| &amp;&amp;	   | 逻辑的 AND | 	[[ \$a -lt 100 &amp;&amp; \$b -gt 100 ]] 返回 false |
| \|\|	 | 逻辑的 OR	 | [[ \$a -lt 100 \|\| \$b -gt 100 ]] 返回 true |

## 布尔运算符

| 运算符	 | 说明	                                 | 举例                                      |
|:-----|:------------------------------------|:----------------------------------------|
| !	   | 非运算，表达式为 true 则返回 false，否则返回 true。	 | [ ! false ] 返回 true。                    |
| -o   | 	或运算，有一个表达式为 true 则返回 true。	        | [ \$a -lt 20 -o \$b -gt 100 ] 返回 true。  |
| -a   | 	与运算，两个表达式都为 true 才返回 true。	        | [ \$a -lt 20 -a \$b -gt 100 ] 返回 false。 |

## 关系运算符

| 运算符	 | 说明	                            | 举例                        |
|:-----|:-------------------------------|:--------------------------|
| -eq	 | 检测两个数是否相等，相等返回 true。	          | [ \$a -eq \$b ] 返回 false。 |
| -ne	 | 检测两个数是否不相等，不相等返回 true。	        | [ \$a -ne \$b ] 返回 true。  |
| -gt	 | 检测左边的数是否大于右边的，如果是，则返回 true。	   | [ \$a -gt \$b ] 返回 false。 |
| -lt	 | 检测左边的数是否小于右边的，如果是，则返回 true。	   | [ \$a -lt \$b ] 返回 true。  |
| -ge	 | 检测左边的数是否大于等于右边的，如果是，则返回 true。	 | [ \$a -ge \$b ] 返回 false。 |
| -le	 | 检测左边的数是否小于等于右边的，如果是，则返回 true。	 | [ \$a -le \$b ] 返回 true。  |

## 算术运算符

| 运算符	 | 说明	                        | 举例                       |
|:-----|:---------------------------|:-------------------------|
| &#43;	   | 加法	                        | `expr $a &#43; $b` 结果为 30。   |
| -	   | 减法	                        | `expr $a - $b` 结果为 -10。  |
| *	   | 乘法	                        | `expr $a * $b` 结果为  200。 |
| /	   | 除法	                        | `expr $b / $a` 结果为 2。    |
| %	   | 取余	                        | `expr $b % $a` 结果为 0。    |
| =	   | 赋值	                        | a=\$b 把变量 b 的值赋给 a。      |
| ==	  | 相等。用于比较两个数字，相同则返回 true。	   | [ \$a == \$b ] 返回 false。 |
| !=	  | 不相等。用于比较两个数字，不相同则返回 true。	 | [ \$a != \$b ] 返回 true。  |

**注意：条件表达式要放在方括号之间，并且要有空格，例如: [\$a==\$b] 是错误的，必须写成 [ \$a == \$b ]。**
&gt; 乘号(\*)前边必须加反斜杠(\\)才能实现乘法运算；  
&gt; 在 MAC 中 shell 的 expr 语法是：$((表达式))，此处表达式中的 &#34;*&#34; 不需要转义符号 &#34;\\&#34; 。

## 自增和自减操作符

* 使用 let 命令

&gt; let 命令允许对整数进行算术运算。

```shell
#!/bin/bash

# 初始化变量
num=5

# 自增
let num&#43;&#43;

# 自减
let num--

echo $num
```

* 使用 $(( )) 进行算术运算

&gt; $(( )) 语法也是进行算术运算的一种方式。

```shell
#!/bin/bash

# 初始化变量
num=5

# 自增
num=$((num &#43; 1))

# 自减
num=$((num - 1))

echo $num
```

* 使用 expr 命令

&gt; expr 命令可以用于算术运算，但在现代脚本中不如 let 和 $(( )) 常用。

```shell
#!/bin/bash

# 初始化变量
num=5

# 自增
num=$(expr $num &#43; 1)

# 自减
num=$(expr $num - 1)

echo $num
```

* 使用 (( )) 进行算术运算

&gt; 与 $(( )) 类似，(( )) 语法也可以用于算术运算。

```shell
#!/bin/bash

# 初始化变量
num=5

# 自增
((num&#43;&#43;))

# 自减
((num--))

echo $num
```

---

> 作者: Leon  
> URL: https://liangml.github.io/posts/shell/  

